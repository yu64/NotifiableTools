# yaml-language-server: $schema=./schema.json

Rules:
  - IntervalMilliseconds: 100
    Name: "ルール"
    Enable: true
    Condition:
      $type: Block
      BlockName: "テストブロック"
      CanPrint: true
      ResultName: "output"
      Lines:
        - Name: "focused"
          Func:
            $type: GetFocusedElement

        - Name: "otherFocused"
          Func:
            $type: FilterProcess
            CanExclude: true
            Element:
              $type: GetScopeValue
              Name: "focused"
            Process:
              $type: GetCurrentProcess

        - Name: "filledElement"
          Func:
            $type: IfNotPresentUsePrevElement
            Value:
              $type: GetScopeValue
              Name: "otherFocused"

        - Name: "targetElement"
          Func:
            $type: FilterAutomationId
            AutomationId:
              $type: StringSymbol
              Value: "15"
            Element:
              $type: GetScopeValue
              Name: "filledElement"

        - Name: "isChangeFocus"
          Func:
            $type: IsChanged
            Value:
              $type: GetScopeValue
              Name: "targetElement"

        - Name: "isNotChange"
          Func:
            $type: Not
            Value:
              $type: GetScopeValue
              Name: "isChangeFocus"

        - Name: "output"
          Func:
            $type: GetScopeValue
            Name: "focused"
        
        

    Notions:
      - $type: TextBox
        DefaultText: ""
        Position:
          $type: MouseCircle
          Angle: 0
          Radius: 50
        Action:
          CommandTemplate: "cmd /k echo 入力:{InputText} 対象:{Custom.Target.AutomationId}"
          CanStdOut: true
          Encoding: Shift_JIS

  